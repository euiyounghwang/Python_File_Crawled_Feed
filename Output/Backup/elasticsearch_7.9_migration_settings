
##########################################
##########################################
##########################################
# elasticsearch data migration 7.9
# WAS_REST_NORI_TOKENIZER
##########################################
##########################################
##########################################

DELETE es_search_nori_tokenizer

PUT es_search_nori_tokenizer
{
  "settings": {
    "index": {
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "max_ngram_diff": 250,
      "number_of_shards": "10",
      "analysis": {
        "filter": {
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "30_0300_posco_glossary": {
            "type": "synonym",
            "synonyms_path": "analysis/30_0300_posco_glossary",
            "lenient": "true"
          },
          "length_filter": {
            "type": "length",
            "min": "2"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "whitespace_remove": {
            "pattern": " ",
            "type": "pattern_replace",
            "replacement": ""
          },
          "truncate_filter": {
            "length": "150",
            "type": "truncate"
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_synonym": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "30_0300_posco_glossary",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          }
        },
        "tokenizer": {
          "nori_user_dict": {
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt",
            "decompound_mode": "mixed"
          },
          "sentence_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "my_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "20"
          }
        }
      },
      "number_of_replicas": "1"
    }
  },
  "mappings": {}
}

# alias posco_hrsearch
POST _aliases
{
  "actions": [
    {
      "add": {
        "indices": [
          "es_search_nori_tokenizer"
        ],
        "alias": "WAS_REST_NORI_TOKENIZER"
      }
    }
  ]
}

GET WAS_REST_NORI_TOKENIZER/_analyze
{
  "text": "압연입니다",
  "analyzer": "korean_analyzer_custom"
}



##########################################
##########################################
##########################################
# elasticsearch data migration 7.9
# ecm_template
##########################################
##########################################
##########################################


GET /_template/ecm_template

# ECM Template
PUT /_template/ecm_template/
{
  "index_patterns": [
    "*_ecm_grp*",
      "*_pcm_*",
      "*_ecm_*"
  ],
  "settings": {
    "index": {
      "number_of_shards": 10,
      "number_of_replicas": 1,
      "max_ngram_diff": 20,
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "analysis": {
        "filter": {
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "length_filter": {
            "type": "length",
            "min": 2
          },
          "truncate_filter": {
            "type": "truncate",
            "length": 150
          },
          "whitespace_remove": {
            "type": "pattern_replace",
            "pattern": " ",
            "replacement": ""
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "korean_synonym": {
            "filter": [
              "lowercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          },
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          }
        },
        "tokenizer": {
          "sentence_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "my_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "nori_user_dict": {
            "decompound_mode": "mixed",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit",
              "punctuation"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "20"
          }
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "@timestamp": {
        "type": "date"
      },
      "TITLE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONTENT_SUMMARY": {
        "type": "keyword"
      },
      "CONTENT": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "fields": {
          "truncated": {
            "type": "text",
            "analyzer": "my_truncate_analyzer",
            "fielddata": true
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "ECM_TAG_LIST": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "tag_terms": {
            "type": "text",
            "analyzer": "split_analyzer"
          },
          "whitespace": {
            "type": "text",
            "analyzer": "whitespace"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "TAG_LIST": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "TAG_01": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_02": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_03": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_04": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_05": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_06": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_07": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_08": {
            "type": "keyword",
            "ignore_above": 256
          },
          "TAG_09": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_10": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_11": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_12": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_13": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_14": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_15": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_16": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_17": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_18": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_19": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_20": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_21": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_22": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_23": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_24": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_25": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_26": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_27": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_28": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_29": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          },
          "TAG_30": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          }
        }
      },
      "DEPT_CODE": {
        "type": "keyword"
      },
      "USER_NAME": {
        "type": "text",
        "analyzer": "nGram_analyzer"
      },
      "USER_NO": {
        "type": "keyword"
      },
      "COWORKER_ID": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          }
        }
      },
      "SYSTEM_SUB_CODE": {
        "type": "keyword"
      },
      "FILE_FORMAT": {
        "type": "keyword"
      },
      "SECURITY_LEVEL": {
        "type": "keyword"
      },
      "ECM_CONTENT_SOURCE": {
        "type": "keyword"
      },
      "DEPT_NAME": {
        "type": "text",
        "analyzer": "nGram_analyzer"
      },
      "THUMBNAILS": {
        "type": "binary"
      },
      "ECM_CREATE_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "INPUTDATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "UPDATED_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "QUEUE_INSERT_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "INDEX_INSERT_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "EXPT_RCMD_CNT": {
        "type": "long"
      },
      "GNR_RCMD_CNT": {
        "type": "long"
      },
      "SUM_RCMD_CNT": {
        "type": "long"
      }
    }
  }
}


##########################################
##########################################
##########################################
# elasticsearch data migration 7.6
# citizen_template
##########################################
##########################################
##########################################

DELETE posco_citizen_idx

PUT posco_citizen_idx
{
  "settings": {
    "index": {
      "number_of_shards": 10,
      "number_of_replicas": 1,
      "max_ngram_diff": 20,
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "analysis": {
        "filter": {
          "whitespace_remove": {
            "pattern": " ",
            "type": "pattern_replace",
            "replacement": ""
          },
          "synonym": {
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "truncate_filter": {
            "length": "150",
            "type": "truncate"
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "uppercase_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "standard"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_synonym": {
            "filter": [
              "lowercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          }
        },
        "tokenizer": {
          "nori_user_dict": {
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt",
            "decompound_mode": "MIXED"
          },
          "sentence_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "my_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit"
            ],
            "min_gram": "2",
            "type": "ngram",
            "max_gram": "20"
          }
        }
      }
    }
  },
  "mappings": {
    "dynamic_templates": [
      {
        "attch_title": {
          "match": "ATTCH_TITLE_*",
          "match_mapping_type": "string",
          "mapping": {
            "analyzer": "nGram_analyzer",
            "type": "text"
          }
        }
      },
      {
        "attch_contents": {
          "match": "ATTCH_CONTENTS_*",
          "match_mapping_type": "string",
          "mapping": {
            "type": "text",
            "term_vector": "with_positions_offsets",
            "fields": {
              "truncated": {
                "type": "text",
                "analyzer": "my_truncate_analyzer",
                "fielddata": true
              }
            },
            "analyzer": "korean_analyzer_custom"
          }
        }
      },
      {
        "date_template": {
          "match": "*DATE",
          "mapping": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      {
        "date_template": {
          "match": "*_DATE",
          "mapping": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      }
    ],
    "properties": {
      "TITLE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONTENT": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "fields": {
          "truncated": {
            "type": "text",
            "analyzer": "my_truncate_analyzer",
            "fielddata": true
          }
        },
        "analyzer": "korean_analyzer_custom"
      }
    }
  }
}

GET posco

GET posco_citizen_idx/_mapping

GET posco_citizen_idx/_search
{
  "track_total_hits": true,
  "query": {
    "match_all": {}
  },
  "size": 15
}


# aggs with each results
GET posco_citizen_idx/_search
{
  "size": 0,
  "query": {
    "bool": {
      "must": [
        {
          "query_string": {
            "query": "기업시민",
            "lenient": true,
            "fields": [
              "TITLE",
              "TITLE.nGram",
              "CONTENT"
            ]
          }
        }
      ]
    }
  },
  "aggs": {
    "aggs_search_response": {
      "sampler": {
        "shard_size": 150000
      },
      "aggs": {
        "group_by_category": {
          "terms": {
            "field": "CATEGORY.keyword",
            "size": 100
          },
          "aggs": {
            "result_data": {
              "top_hits": {
                "_source": {
                  "include": [
                    "TITLE",
                    "CATEGORY"
                  ]
                },
                "highlight": {
                  "require_field_match": true,
                  "order": "score",
                  "pre_tags": [
                    "<b>"
                  ],
                  "post_tags": [
                    "</b>"
                  ],
                  "fields": {
                    "*": {
                      "number_of_fragments": 1,
                      "type": "plain",
                      "fragment_size": 150
                    }
                  }
                },
                "from" : 0,
                "size": 2
              }
            }
          }
        }
      }
    }
  }
}



##########################################
##########################################
##########################################
# elasticsearch data migration 7.6
# patent_template
##########################################
##########################################
##########################################

DELETE posco_patent_idx
DELETE posco_ecm_grp1_idx

# posco_patent_idx
PUT posco_patent_idx
{
  "settings": {
    "index": {
      "number_of_shards": 10,
      "number_of_replicas": 1,
      "max_ngram_diff": 20,
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "analysis": {
        "filter": {
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "length_filter": {
            "type": "length",
            "min": 2
          },
          "truncate_filter": {
            "type": "truncate",
            "length": 150
          },
          "whitespace_remove": {
            "type": "pattern_replace",
            "pattern": " ",
            "replacement": ""
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "J",
              "MAG",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "korean_synonym": {
            "filter": [
              "uppercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "split_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "comma_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "comma_tokenizer"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          },
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "uppercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "uppercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          }
        },
        "tokenizer": {
          "sentence_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "comma_tokenizer": {
            "type": "pattern",
            "pattern": """\,"""
          },
          "my_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "nori_user_dict": {
            "decompound_mode": "mixed",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit",
              "punctuation",
              "symbol"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "18"
          }
        }
      }
    }
  },
  "mappings": {
    "dynamic_templates": [
      {
        "date_template": {
          "match": "*_DT",
          "mapping": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      {
        "date_template": {
          "match": "*_DATE",
          "mapping": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      {
        "text_template": {
          "match": "CONTENT",
          "mapping": {
            "fields": {
              "keyword": {
                "type": "text",
                "analyzer": "upper_index_analyzer"
              },
              "nGram": {
                "type": "text",
                "analyzer": "nGram_analyzer"
              },
              "search_nori": {
                "term_vector": "with_positions_offsets",
                "type": "text",
                "analyzer": "korean_analyzer_custom"
              },
              "comma": {
                "type": "text",
                "analyzer": "comma_analyzer"
              }
            },
            "type": "text",
            "analyzer": "whitespace"
          }
        }
      },
      {
        "text_template": {
          "match_mapping_type": "string",
          "mapping": {
            "fields": {
              "keyword": {
                "type": "text",
                "analyzer": "upper_index_analyzer"
              },
              "nGram": {
                "type": "text",
                "analyzer": "nGram_analyzer"
              },
              "raw": {
                "type": "keyword"
              },
              "search_nori": {
                "term_vector": "with_positions_offsets",
                "type": "text",
                "analyzer": "korean_analyzer_custom"
              },
              "comma": {
                "type": "text",
                "analyzer": "comma_analyzer"
              }
            },
            "type": "text",
            "analyzer": "whitespace"
          }
        }
      }
    ]
  }
}


GET posco_patent_idx/_mapping



##########################################
##########################################
##########################################
# elasticsearch data migration 7.9
# ict_hrsearch index
##########################################
##########################################
##########################################

PUT ict_hrsearch_idx
{
  "settings": {
    "index": {
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "max_ngram_diff": 20,
      "number_of_shards": "10",
      "analysis": {
        "filter": {
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary.txt"
          },
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "truncate_filter": {
            "length": "150",
            "type": "truncate"
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "upper_keyword_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "max_token_length": "200000",
            "tokenizer": "ngram_tokenizer"
          },
          "korean_analyzer_raw": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "nori_user_dict"
          },
          "search_keyword_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "whitespace_analyzer": {
            "filter": [
              "uppercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "uppercase"
            ],
            "tokenizer": "nori_tokenizer"
          }
        },
        "tokenizer": {
          "nori_user_dict": {
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt",
            "decompound_mode": "mixed"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "10"
          }
        }
      },
      "number_of_replicas": "1"
    }
  },
  "mappings": {
    "properties": {
      "EMPCD": {
        "type": "keyword"
      },
      "HR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "AGE": {
            "type": "double"
          },
          "CONT_YEARS": {
            "type": "double"
          },
          "DEPTCD": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "upper_keyword_analyzer",
            "fielddata": true
          },
          "DEPTCD_PATH": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "DEPT_HISTORY": {
            "type": "text",
            "fields": {
              "nGram": {
                "type": "text",
                "analyzer": "nGram_analyzer"
              },
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "korean_analyzer_custom"
          },
          "EMPCD": {
            "type": "keyword"
          },
          "EMP_SIL": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "EMP_SIL_CD": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "upper_keyword_analyzer",
            "fielddata": true
          },
          "FDEPTNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HNAME": {
            "type": "text",
            "fields": {
              "nori": {
                "type": "text",
                "analyzer": "korean_analyzer_custom"
              },
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer",
            "fielddata": true
          },
          "IGENTDAT": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "JIKCKCD": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer",
            "fielddata": true
          },
          "JIKCKCD_DISP": {
            "type": "keyword"
          },
          "JIKGBCD": {
            "type": "text",
            "fielddata": true
          },
          "JIKGBCD_DISP": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer",
            "fielddata": true
          },
          "JIKMUCD": {
            "type": "keyword"
          },
          "JIKMUCD_DISP": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "MAJOR_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "MAJOR_TYPE": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "REPONSIBILITY_WORK": {
            "type": "text",
            "fields": {
              "nGram": {
                "type": "text",
                "analyzer": "nGram_analyzer"
              },
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "korean_analyzer_custom"
          },
          "RETDAT": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "SCHOOL_CAREER": {
            "type": "keyword"
          },
          "SCHOOL_CAREER_DISP": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SEXGB": {
            "type": "keyword"
          },
          "SEXGB_DISP": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword",
                "ignore_above": 256
              }
            }
          },
          "STATUS": {
            "type": "text",
            "fielddata": true
          },
          "WORK_AREA": {
            "type": "text",
            "fielddata": true
          },
          "WORK_AREA_DISP": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_APPR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "FINAL_GRADE": {
            "type": "keyword"
          }
        }
      },
      "H_APYR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "AVG_GRADE": {
            "type": "keyword"
          },
          "AVG_YEAR": {
            "type": "keyword"
          }
        }
      },
      "H_CMP_IND": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "DEPTH1": {
            "type": "keyword"
          },
          "DEPTH1_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "DEPTH2": {
            "type": "keyword"
          },
          "DEPTH2_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "DEPTH3": {
            "type": "keyword"
          },
          "DEPTH3_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SELF_SCORE": {
            "type": "double"
          },
          "SKILL_CODE": {
            "type": "keyword"
          },
          "SKILL_SCORE": {
            "type": "double"
          },
          "SKILL_TYPE": {
            "type": "keyword"
          }
        }
      },
      "H_CMP_JKM": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "DEPTH1": {
            "type": "keyword"
          },
          "DEPTH1_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "DEPTH2": {
            "type": "keyword"
          },
          "DEPTH2_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "DEPTH3": {
            "type": "keyword"
          },
          "DEPTH3_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SELF_SCORE": {
            "type": "double"
          },
          "SKILL_CODE": {
            "type": "keyword"
          },
          "SKILL_SCORE": {
            "type": "double"
          },
          "SKILL_TYPE": {
            "type": "keyword"
          }
        }
      },
      "H_CMP_SKL": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "DEPTH1": {
            "type": "keyword"
          },
          "DEPTH1_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "DEPTH2": {
            "type": "keyword"
          },
          "DEPTH2_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "DEPTH3": {
            "type": "keyword"
          },
          "DEPTH3_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SELF_SCORE": {
            "type": "double"
          },
          "SKILL_CODE": {
            "type": "keyword"
          },
          "SKILL_SCORE": {
            "type": "double"
          },
          "SKILL_TYPE": {
            "type": "keyword"
          }
        }
      },
      "H_COYR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "AVG_POINT": {
            "type": "double"
          },
          "AVG_YEAR": {
            "type": "keyword"
          }
        }
      },
      "H_EDU": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "EDU_NAME": {
            "type": "text",
            "fields": {
              "exact": {
                "type": "text",
                "analyzer": "korean_analyzer_custom"
              },
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "EDU_VENDOR": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_LANG": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "LANG_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "LANG_POINT": {
            "type": "long"
          },
          "LONG_CD": {
            "type": "keyword"
          }
        }
      },
      "H_LEYR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "AVG_POINT": {
            "type": "double"
          },
          "AVG_YEAR": {
            "type": "keyword"
          }
        }
      },
      "H_LICS": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "LICENSE_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "LICENSE_TYPE_CD": {
            "type": "keyword"
          },
          "LICENSE_TYPE_DISP": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PUBNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_OTCR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "COMPANY_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "WORK_TYPE": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_SCHL": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "CONFIRM": {
            "type": "keyword"
          },
          "SCHOOL_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "PMS": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "BUSY_AREA_CODE": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "BUSY_AREA_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "BUSY_TEAM": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "BUSY_TEAM_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "BUSY_TYPE_CODE": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "BUSY_TYPE_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "CUSTOMER_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "CUSTOMER_TYPE": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "CUSTOMER_TYPE_DISP": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "DELIVERY_RESULT": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "EXE_TEAM": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "EXE_TEAM_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "ORIGINAL_CUSTOMER_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PROFIT_RESULT": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "PROJECT_NAME": {
            "type": "text",
            "fields": {
              "exact": {
                "type": "text",
                "analyzer": "korean_analyzer_custom"
              },
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PROJECT_NUMBER": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "PROJECT_STATUS": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "PROJECT_STATUS_DISP": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "PROJECT_SUMMARY": {
            "type": "text",
            "fields": {
              "exact": {
                "type": "text",
                "analyzer": "korean_analyzer_custom"
              },
              "raw": {
                "type": "keyword"
              },
              "truncated": {
                "type": "text",
                "analyzer": "my_truncate_analyzer"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "TECH_CODE": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "TECH_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "WORK_DIVISION": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "PMS_OBJ": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "ACTUAL_MM": {
            "type": "double"
          },
          "CONVENANT_AMOUNT": {
            "type": "double"
          },
          "PERSON_COUNT": {
            "type": "double"
          },
          "PROFIT_B_PROFIT": {
            "type": "double"
          },
          "PROFIT_D_PROFIT": {
            "type": "double"
          },
          "PROFIT_REVENUSE": {
            "type": "double"
          }
        }
      },
      "POM": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "BUSINESS_CONTENTS": {
            "type": "text",
            "fields": {
              "truncated": {
                "type": "text",
                "analyzer": "my_truncate_analyzer"
              }
            }
          },
          "BUSINESS_STATUS": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword",
                "ignore_above": 256
              }
            }
          },
          "BUSINESS_STATUS_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "BUSINESS_TEAM_CD": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "BUSINESS_TEAM_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "CLASS_CATEGORY": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "CLASS_CATEGORY_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "COUNTRY_CD": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "COUNTRY_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "CUSTOMER_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "text",
                "analyzer": "upper_keyword_analyzer"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "CUSTOMER_TYPE": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "CUSTOMER_TYPE_NAME": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword",
                "ignore_above": 256
              }
            }
          },
          "DROP_REASON": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "ELEMENT_CODE": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "ELEMENT_CODE_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "LONG_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PARTITION": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PM_TEAM_CD": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "PM_TEAM_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PROCESS_TYPE": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PROJECT_NAME": {
            "type": "text",
            "fields": {
              "exact": {
                "type": "text",
                "analyzer": "korean_analyzer_custom"
              },
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PROJECT_NUMBER": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          }
        }
      },
      "POM_OBJ": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "E_AMT_TOTAL": {
            "type": "double"
          },
          "E_AMT_YEAR": {
            "type": "keyword"
          },
          "E_CNT_TOTAL": {
            "type": "double"
          },
          "E_CNT_YEAR": {
            "type": "keyword"
          },
          "FUNDING_DECIDE_AMT": {
            "type": "keyword"
          },
          "FUNDING_PROGRESS_AMT": {
            "type": "keyword"
          },
          "ORDER_AMOUNT": {
            "type": "keyword"
          },
          "POSSIBILITY": {
            "type": "keyword"
          },
          "SALES_START_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "S_AMT_TOTAL": {
            "type": "double"
          },
          "S_AMT_YEAR": {
            "type": "keyword"
          },
          "S_CNT_TOTAL": {
            "type": "double"
          },
          "S_CNT_YEAR": {
            "type": "keyword"
          },
          "TOTAL_AMOUNT": {
            "type": "keyword"
          }
        }
      }
    }
  }
}


##########################################
##########################################
##########################################
# elasticsearch data migration 7.9
# e_hr index (posco_hrsearch_idx)
##########################################
##########################################
##########################################


PUT posco_hrsearch_idx
{
  "settings": {
    "index": {
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "max_ngram_diff": 20,
      "number_of_shards": "10",
      "analysis": {
        "filter": {
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary.txt"
          },
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "truncate_filter": {
            "length": "150",
            "type": "truncate"
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "char_filter": {
          "whitespace_remove": {
            "pattern": """\.""",
            "type": "pattern_replace",
            "replacement": " "
          }
        },
        "analyzer": {
          "upper_keyword_analyzer": {
            "filter": [
              "uppercase"
            ],
            "char_filter": [
              "whitespace_remove"
            ],
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "korean_analyzer_raw": {
            "filter": [
              "lowercase"
            ],
            "tokenizer": "nori_user_dict"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "lowercase"
            ],
            "tokenizer": "nori_tokenizer"
          },
          "nGram_foreign_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_foreign_tokenizer"
          }
        },
        "tokenizer": {
          "nori_user_dict": {
            "mode": "MIXED",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "ngram_foreign_tokenizer": {
            "token_chars": [
              "letter",
              "digit"
            ],
            "min_gram": "1",
            "type": "nGram",
            "max_gram": "20"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "20"
          }
        }
      },
      "number_of_replicas": "1"
    }
  },
  "mappings": {
    "properties": {
      "ES_COM_CD": {
        "type": "keyword"
      },
      "ES_EMP_CD": {
        "type": "keyword"
      },
      "ES_EMP_NUM": {
        "type": "keyword"
      },
      "HR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "AGE_DNM": {
            "type": "double"
          },
          "COMPETENCE_ID": {
            "type": "keyword"
          },
          "COMPETENCE_ID_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "CURRENT_JOB_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "EMPLOYEE_CHINESE_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_foreign_analyzer"
          },
          "EMPLOYEE_ENGLISH_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "EMPLOYEE_ID": {
            "type": "keyword"
          },
          "EMPLOYEE_NAME": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer",
            "fielddata": true
          },
          "GRADE_GROUP": {
            "type": "keyword"
          },
          "GROUP_MANAGER_CODE": {
            "type": "keyword"
          },
          "GROUP_MANAGER_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "GROUP_MANAGER_CODE_GROUP": {
            "type": "keyword"
          },
          "GROUP_MANAGER_CODE_GROUP_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HIRED_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "HR_ADOP_APP_SEX": {
            "type": "keyword"
          },
          "HR_ADOP_APP_SEX_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_JIKGUB": {
            "type": "keyword"
          },
          "HR_JIKGUB_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer",
            "fielddata": true
          },
          "HR_JIKGUB_GROUP": {
            "type": "keyword"
          },
          "HR_JIKGUB_GROUP_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "INVENTORY_ITEM_STATUS_CODE": {
            "type": "keyword"
          },
          "INVENTORY_ITEM_STATUS_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "JOB_ID": {
            "type": "keyword"
          },
          "JOB_ID_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "JOIN_COMPANY_CD": {
            "type": "keyword"
          },
          "JOIN_COMPANY_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "MARITAL_STATUS": {
            "type": "keyword"
          },
          "ORG_CODE": {
            "type": "keyword"
          },
          "ORG_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "ORG_CODE_GROUP": {
            "type": "keyword"
          },
          "ORG_CODE_GROUP_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PAYROLL_TYPE": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "PAYROLL_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PERSON_ID": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword",
                "ignore_above": 256
              }
            }
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REGULAR_SHIFT": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          },
          "REGULAR_SHIFT_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SHIFT_UNIT": {
            "type": "keyword"
          },
          "SHIFT_UNIT_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "STANDING_CODE": {
            "type": "keyword"
          },
          "STANDING_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "WORK_LOCATION": {
            "type": "keyword"
          },
          "WORK_LOCATION_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "WORK_PERIOD_DNM": {
            "type": "double"
          }
        }
      },
      "H_ADDR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "ADDRESS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "CUST_ADDRESS_TYPE_FLAG": {
            "type": "keyword"
          },
          "CUST_ADDRESS_TYPE_FLAG_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_ASSO": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "ASSOCIATION_GROUP_CODE": {
            "type": "keyword"
          },
          "ASSOCIATION_GROUP_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "ASSOCIATION_NAME_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "GROUP_MANGER_NAME_DNM": {
            "type": "keyword"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "START_DATE_DNM": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      "H_ATTR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "HR_SPECIAL_INFORMATION_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PERSONAL_PROFILE_TYPE": {
            "type": "keyword"
          },
          "PERSONAL_PROFILE_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PERSONAL_PROFILE_TYPE_V": {
            "type": "keyword"
          },
          "PERSONAL_PROFILE_TYPE_V_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARK": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_BOHN": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "BOHUN_CODE": {
            "type": "keyword"
          },
          "BOHUN_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "BOHUN_RELATED_CODE": {
            "type": "keyword"
          },
          "BOHUN_RELATED_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_ADOP_CJG_ENGN_CD": {
            "type": "keyword"
          },
          "HR_ADOP_CJG_ENGN_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "RECU_BOHUN_YN": {
            "type": "keyword"
          },
          "RECU_BOHUN_YN_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_CARR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "ATTRIBUTE1_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "COMPANY_NAME": {
            "type": "keyword"
          },
          "COMPANY_NAME_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_JOB_JSYS_KN_TP": {
            "type": "keyword"
          },
          "HR_JOB_JSYS_KN_TP_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_JOB_OCPG_TP": {
            "type": "keyword"
          },
          "HR_JOB_OCPG_TP_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      "H_COMP": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "APPR_APPROVER_OPINION1_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "APPR_APPROVER_OPINION2_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "APPR_COMPETENCE_POINT_DNM": {
            "type": "double"
          },
          "APPR_OBJECT_GRADE": {
            "type": "keyword"
          },
          "APPR_OBJECT_GRADE_CNT": {
            "type": "double"
          },
          "APPR_OBJECT_GRADE_CNT_DNM": {
            "type": "double"
          },
          "APPR_OBJECT_GRADE_DNM": {
            "type": "keyword"
          },
          "APPR_OPINION1_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "APPR_OPINION2_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "APPR_OPINION3_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "APPR_OPINION4_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "APPR_OPINION5_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "APPR_OPINION6_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "APPR_OPINION7_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "APPR_OPINION_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "APPR_PERSONALITY_CODE": {
            "type": "keyword"
          },
          "APPR_PERSONALITY_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_OFFA_SESS_ARS_OPIN_CONT_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARK": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_DEVP": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "HR_CARR_DEV_HOPE_JOB_NM_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_DEVELOP_PLAN_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_EMP_AB_WK_HOPE_F": {
            "type": "keyword"
          },
          "HR_EMP_AB_WK_HOPE_F_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_EMP_AB_WK_RSN_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_EMP_CO_CDDT_RQST_DDY_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARK": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "TERRITORY_CD_N": {
            "type": "keyword"
          },
          "TERRITORY_CD_N_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_EDUC": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "TITLE_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "VERSION_NAME_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_ELIC": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "CERTIFIED_DATE_DNM": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "CERTIFIED_INSTITUTION": {
            "type": "keyword"
          },
          "CERTIFIED_INSTITUTION_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "COMPETENCE_GRADE_VALUE": {
            "type": "keyword"
          },
          "COMPETENCE_GRADE_VALUE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "INTERNAL_EXTERNAL_CD": {
            "type": "keyword"
          },
          "INTERNAL_EXTERNAL_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUALI_LICENSE_DETAIL_CD": {
            "type": "keyword"
          },
          "QUALI_LICENSE_DETAIL_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      "H_EXPT": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "EXPERT_CD": {
            "type": "keyword"
          },
          "GRADE_CODE": {
            "type": "double"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      "H_FAML": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "ADDRESS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "CONTACT_TYPE": {
            "type": "keyword"
          },
          "CONTACT_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "CUST_ADDRESS_TYPE_FLAG": {
            "type": "keyword"
          },
          "CUST_ADDRESS_TYPE_FLAG_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "FAMILY_NAME_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer",
            "fielddata": true
          },
          "HANDICAP_YN": {
            "type": "keyword"
          },
          "HANDICAP_YN_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_ADOP_APP_SEX": {
            "type": "keyword"
          },
          "HR_ADOP_APP_SEX_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PERSON_COUNT1_DNM": {
            "type": "long"
          },
          "PERSON_COUNT2_DNM": {
            "type": "long"
          },
          "PERSON_COUNT3_DNM": {
            "type": "long"
          },
          "PERSON_COUNT_DNM": {
            "type": "long"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_HCAP": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "HR_EMP_OBST_GRD_JDG_DAY_DNM": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "HR_EMP_OBST_KN_TP": {
            "type": "keyword"
          },
          "HR_EMP_OBST_KN_TP_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "LABR_WFRE_OBST_GRD": {
            "type": "keyword"
          },
          "LABR_WFRE_OBST_GRD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "RECU_HANDICAP_CODE": {
            "type": "keyword"
          },
          "RECU_HANDICAP_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_JOBD": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "JOB_DETAIL_CD": {
            "type": "keyword"
          },
          "PERIOD_VALUE": {
            "type": "double"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      "H_JOBM": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "JOB_MAIN_CD": {
            "type": "keyword"
          },
          "PERIOD_VALUE": {
            "type": "double"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      "H_JOBS": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "JOB_SUB_CD": {
            "type": "keyword"
          },
          "PERIOD_VALUE": {
            "type": "double"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      "H_LANG": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "ACTIVE_FLAG": {
            "type": "keyword"
          },
          "LANG_GRADE": {
            "type": "keyword"
          },
          "LANG_GRADE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "LANG_SCR_DNM": {
            "type": "double"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "RECU_LANG_TYPE": {
            "type": "keyword"
          },
          "RECU_LANG_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SOURCE_LANG": {
            "type": "keyword"
          },
          "SOURCE_LANG_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_LEXP": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "DESCRIPTION_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      "H_MILT": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "HR_ADOP_MSVR_CLAS_CD": {
            "type": "keyword"
          },
          "HR_ADOP_MSVR_CLAS_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "RECU_MILITARY_SERVICE_TYPE": {
            "type": "keyword"
          },
          "RECU_MILITARY_SERVICE_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "RECU_MILITARY_TYPE_NAME": {
            "type": "keyword"
          },
          "RECU_MILITARY_TYPE_NAME_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_PHON": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "PHONE_NUMBER_DNM": {
            "type": "keyword"
          },
          "PHONE_TYPE": {
            "type": "keyword"
          },
          "PHONE_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_PLIC": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "CERTIFIED_DATE_DNM": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "CERTIFIED_INSTITUTION_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "COMPETENCE_GRADE_VALUE": {
            "type": "keyword"
          },
          "COMPETENCE_GRADE_VALUE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "INTERNAL_EXTERNAL_CD": {
            "type": "keyword"
          },
          "INTERNAL_EXTERNAL_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUALI_LICENSE_CD": {
            "type": "keyword"
          },
          "QUALI_LICENSE_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUALI_LICENSE_DETAIL_CD": {
            "type": "keyword"
          },
          "QUALI_LICENSE_DETAIL_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      "H_PNSH": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "DISCIPLINE_CODE": {
            "type": "keyword"
          },
          "DISCIPLINE_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "EFFECTIVE_START_DATE_DNM": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "HR_EMP_DCPY_PDN_DT_DNM": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "HR_EMP_DCPY_PDN_RSN_NM": {
            "type": "keyword"
          },
          "HR_EMP_DCPY_PDN_RSN_NM_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_EMP_DCPY_RSN_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PER_CHARGE_PUNISH": {
            "type": "keyword"
          },
          "PER_CHARGE_PUNISH_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PUNISHMENT_TYPE": {
            "type": "keyword"
          },
          "PUNISHMENT_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARK": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "RESPONSIBILITY_TYPE": {
            "type": "keyword"
          },
          "RESPONSIBILITY_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_RWRD": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "AWARD_CONTENTS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "INTERNAL_EXTERNAL_CD": {
            "type": "keyword"
          },
          "INTERNAL_EXTERNAL_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PRIZE_CLASSIFICATION": {
            "type": "keyword"
          },
          "PRIZE_CLASSIFICATION_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PRIZE_CODE": {
            "type": "keyword"
          },
          "PRIZE_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "PRIZE_DATE_DNM": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "PRIZE_TYPE": {
            "type": "keyword"
          },
          "PRIZE_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARK": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_SALR": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "ANNUAL_SALARY_CHASU": {
            "type": "keyword"
          },
          "ANNUAL_SALARY_CHASU_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "ANNUAL_SALARY_TOTAL_DNM": {
            "type": "double"
          },
          "ANNUAL_SALARY_YEAR": {
            "type": "keyword"
          },
          "ANNUAL_SALARY_YEAR_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "BASIC_SALARY_GRA_RATE_DNM": {
            "type": "double"
          },
          "HR_BAS_SALY_AMT_DNM": {
            "type": "double"
          },
          "HR_BAS_SALY_MON_DV_AMT_DNM": {
            "type": "double"
          },
          "HR_SALY_BOUN_TP_DNM": {
            "type": "keyword"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "RESULT_ANNUAL_SALARY_DNM": {
            "type": "double"
          },
          "RESULT_SALARY_GRA_RATE_DNM": {
            "type": "double"
          }
        }
      },
      "H_SCHL": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "GRADUATION_STATUS": {
            "type": "keyword"
          },
          "GRADUATION_STATUS_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_AFTC_MRG_ADOP_ELCN_TP": {
            "type": "keyword"
          },
          "HR_AFTC_MRG_ADOP_ELCN_TP_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "OUTORG_DEG_CD": {
            "type": "keyword"
          },
          "OUTORG_DEG_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "RECU_MAJOR_TYPE": {
            "type": "keyword"
          },
          "RECU_MAJOR_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SCHOLARSHIP_TYPE": {
            "type": "keyword"
          },
          "SCHOLARSHIP_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SCHOOL_CODE": {
            "type": "keyword"
          },
          "SCHOOL_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SCHOOL_N_MAJOR_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_SCHL_OBJ": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "GRADUATION_STATUS": {
            "type": "keyword"
          },
          "GRADUATION_STATUS_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_AFTC_MRG_ADOP_ELCN_TP": {
            "type": "keyword"
          },
          "HR_AFTC_MRG_ADOP_ELCN_TP_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "OUTORG_DEG_CD": {
            "type": "keyword"
          },
          "OUTORG_DEG_CD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "RECU_MAJOR_TYPE": {
            "type": "keyword"
          },
          "RECU_MAJOR_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SCHOLARSHIP_TYPE": {
            "type": "keyword"
          },
          "SCHOLARSHIP_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SCHOOL_CODE": {
            "type": "keyword"
          },
          "SCHOOL_CODE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "SCHOOL_N_MAJOR_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "TOP_SCHOLARSHIP": {
            "type": "text",
            "analyzer": "upper_keyword_analyzer"
          }
        }
      },
      "H_SORG": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "ORGANIZATION_ID": {
            "type": "keyword"
          },
          "PERIOD_VALUE": {
            "type": "double"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          }
        }
      },
      "H_SSCC": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "EMP_TYPE": {
            "type": "keyword"
          },
          "EMP_TYPE_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_FIELD": {
            "type": "keyword"
          },
          "HR_FIELD_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "HR_SESS_CORE_TLNT_GRD_TP": {
            "type": "keyword"
          },
          "HR_SESS_CORE_TLNT_GRD_TP_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "MPZL_HOLDTEC_NM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "MPZL_HOLDTEC_NM_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_STDY": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "ABROAD_CATEGORY": {
            "type": "keyword"
          },
          "ABROAD_CATEGORY_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "ABROAD_CONTENTS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "ABROAD_INSTITUTION_NAME_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "ABSTUDY_COURSE_NAME": {
            "type": "keyword"
          },
          "ABSTUDY_COURSE_NAME_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "END_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "HR_EMP_SAZM_ELCN_SYS_TP_NM": {
            "type": "keyword"
          },
          "HR_EMP_SAZM_ELCN_SYS_TP_NM_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARK": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "START_DATE_DNM": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "TERRITORY_CD_N": {
            "type": "keyword"
          },
          "TERRITORY_CD_N_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "H_TRAN": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "ABROAD_CONTENTS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "CAREER_TRAINING_INST_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "END_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "QUEUE_INSERT_DATE": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "REMARK": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "REMARKS_DNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "START_DATE_DNM": {
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "TERRITORY_CD_N": {
            "type": "keyword"
          },
          "TERRITORY_CD_N_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          },
          "TRAINING_PART": {
            "type": "keyword"
          },
          "TRAINING_PART_CNM": {
            "type": "text",
            "fields": {
              "raw": {
                "type": "keyword"
              }
            },
            "analyzer": "nGram_analyzer"
          }
        }
      },
      "INSERT_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      }
    }
  }
}

GET posco_hrsearch_idx/_search
{
  "track_total_hits": true, 
  "query": {
    "match_all": {}
  },
  "size": 1
}

# alias posco_hrsearch
POST _aliases
{
  "actions": [
    {
      "add": {
        "indices": [
          "posco_hrsearch_idx"
        ],
        "alias": "posco_hrsearch"
      }
    }
  ]
}



##########################################
##########################################
##########################################
# elasticsearch data migration 7.9
# posco_today_idx
##########################################
##########################################
##########################################

PUT posco_today_idx
{
  "settings": {
    "index": {
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "max_ngram_diff": 250,
      "number_of_shards": "10",
      "analysis": {
        "filter": {
          "length_filter": {
            "type": "length",
            "min": "2"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "whitespace_remove": {
            "pattern": " ",
            "type": "pattern_replace",
            "replacement": ""
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "truncate_filter": {
            "length": "150",
            "type": "truncate"
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "length_filter"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_synonym": {
            "filter": [
              "lowercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "lowercase"
            ],
            "tokenizer": "nori_tokenizer"
          }
        },
        "tokenizer": {
          "nori_user_dict": {
            "mode": "MIXED",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "sentence_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "my_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "20"
          }
        }
      },
      "number_of_replicas": "1"
    }
  },
  "mappings": {
    "properties": {
      "@timestamp": {
        "type": "date"
      },
      "ACL_INFOS": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "COMPANY_CODE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "COMPANY_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "CONTENT": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "fields": {
          "truncated": {
            "type": "text",
            "analyzer": "my_truncate_analyzer",
            "fielddata": true
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONTENT_FILE_FORMAT": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "CONTENT_SIZE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "CONTENT_VERSION_ID": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "COWORKER_ID": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          }
        },
        "fielddata": true
      },
      "DEPT_CODE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "DEPT_NAME": {
        "type": "text",
        "analyzer": "nGram_analyzer"
      },
      "EXPT_RCMD_CNT": {
        "type": "long"
      },
      "EXPT_YN": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "FILE_FORMAT": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "FILE_ID": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "FILE_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "FILE_PATH": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "FILE_SIZE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "GNR_RCMD_CNT": {
        "type": "long"
      },
      "INDEX_INSERT_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "INPUTDATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "ITEMID": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "KEY": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "MAIL_ID": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "MENU_CODE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "MENU_SUB_CODE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "QUEUE_INSERT_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "SECURITY_LEVEL": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "SORT_RCMD": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "SUM_RCMD_CNT": {
        "type": "long"
      },
      "SYSTEM_SUB_CODE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          }
        },
        "fielddata": true
      },
      "SYSTEM_SUB_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "SYSTEM_TAG": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "TARGET_URL": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "THUMBNAILS": {
        "type": "binary"
      },
      "THUMB_IMG_URL": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "TITLE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "UPDATED_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "UPDATED_USER": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "UPDATED_USER_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "UPDATED_USER_NO": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "USED_SYSTEM": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "USER_INFO": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "USER_NAME": {
        "type": "text",
        "analyzer": "nGram_analyzer"
      },
      "USER_NO": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          }
        },
        "fielddata": true
      },
      "VERSION": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      }
    }
  }
}

GET posco_today_idx/_mapping

GET posco_today_idx/_search
{
  "track_total_hits": true, 
  "query": {
    "match_all": {}
  },
  "size": 10
}



##########################################
##########################################
##########################################
# elasticsearch data migration 7.9
# posco_posapia_idx index
##########################################
##########################################
##########################################

DELETE posco_posapia_idx

PUT posco_posapia_idx
{
  "settings": {
    "index": {
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "30000"
      },
      "max_ngram_diff": 250,
      "number_of_shards": "10",
      "analysis": {
        "filter": {
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "lenient": true,
            "stopwords_path": "analysis/stopwords.txt"
          },
          "truncate_filter": {
            "length": "150",
            "type": "truncate"
          },
          "whitespace_remove": {
            "type": "pattern_replace",
            "pattern": " ",
            "replacement": ""
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "no_whitespace_upper_analyzer": {
              "filter": [
                "uppercase",
                "whitespace_remove"
              ],
              "type": "custom",
              "tokenizer": "keyword"
            },
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
           "exact_upper_analyzer": {
              "filter": [
                "uppercase"
              ],
              "type": "custom",
              "tokenizer": "keyword"
            },
          "upper_keyword_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "whitespace_remove_keyword_analyzer": {
            "filter": [
              "whitespace_remove",
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "stop"
            ],
            "lenient": true,
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_raw": {
            "filter": [
              "lowercase"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "lowercase"
            ],
            "tokenizer": "nori_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          }
        },
        "tokenizer": {
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "punctuation",
              "digit"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "20"
          },
          "nori_user_dict": {
            "mode": "MIXED",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          }
        }
      }
    }
  },
  "mappings": {
    "dynamic_templates": [
      {
        "date_template": {
          "match": "*TIMESTAMP*",
          "mapping": {
            "format": "yyyy-MM-dd HH:mm:ss",
            "type": "date"
          }
        }
      },
      {
        "num_template": {
          "match_mapping_type": "long",
          "mapping": {
            "fields": {
              "ngram": {
                "analyzer": "nGram_analyzer",
                "term_vector": "with_positions_offsets",
                "type": "text"
              },
              "keyword": {
                "analyzer": "exact_upper_analyzer",
                "term_vector": "with_positions_offsets",
                "type": "text"
              }
            },
            "type": "long"
          }
        }
      },
      {
        "text_template": {
          "match_mapping_type": "string",
          "mapping": {
            "fields": {
              "no_whitespace": {
                "analyzer": "no_whitespace_upper_analyzer",
                "term_vector": "with_positions_offsets",
                "type": "text"
              },
              "exact": {
                "analyzer": "korean_analyzer_custom",
                "term_vector": "with_positions_offsets",
                "type": "text"
              },
              "sort_keyword": {
                "type": "keyword"
              },
              "ngram": {
                "analyzer": "nGram_analyzer",
                "term_vector": "with_positions_offsets",
                "type": "text"
              },
              "keyword": {
                "analyzer": "exact_upper_analyzer",
                "term_vector": "with_positions_offsets",
                "type": "text"
              }
            },
            "type": "text"
          }
        }
      }
    ],
    "properties": {
      "ITEM_ID": {
        "type": "keyword"
      },
      "SPEC": {
        "type": "nested",
        "include_in_root": true,
        "properties": {}
      },
      "SPEC_TEST": {
        "type": "nested",
        "include_in_root": true,
        "properties": {
          "SPEC_TEST_Child": {
            "type": "nested",
            "include_in_root": true,
            "properties": {}
          }
        }
      }
    }
  }
}

GET posco_posapia_idx/_mapping

GET posco_posapia_idx/_search
{
  "track_total_hits": true, 
  "query": {
    "match_all": {}
  },
  "size": 1
}




##########################################
##########################################
##########################################
# elasticsearch data migration 7.9
# ict_sop_idx
##########################################
##########################################
##########################################

PUT ict_sop_idx
{
  "settings": {
    "index": {
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "max_ngram_diff": 250,
      "number_of_shards": "10",
      "analysis": {
        "filter": {
          "length_filter": {
            "type": "length",
            "min": "2"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "whitespace_remove": {
            "pattern": " ",
            "type": "pattern_replace",
            "replacement": ""
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "truncate_filter": {
            "length": "150",
            "type": "truncate"
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_synonym": {
            "filter": [
              "lowercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          }
        },
        "tokenizer": {
          "nori_user_dict": {
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt",
            "decompound_mode": "mixed"
          },
          "sentence_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "my_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "20"
          }
        }
      },
      "number_of_replicas": "1"
    }
  },
  "mappings": {
    "properties": {
      "@timestamp": {
        "type": "date"
      },
      "ACL_INFOS": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "COMPANY_CODE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "COMPANY_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "CONTENT": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "fields": {
          "truncated": {
            "type": "text",
            "analyzer": "my_truncate_analyzer",
            "fielddata": true
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONTENT_TAG": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "COWORKER_ID": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "DEPT_CODE": {
        "type": "keyword"
      },
      "DEPT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "EXPT_RCMD_CNT": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "EXPT_YN": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "FILE_FORMAT": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "FILE_ID": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "FILE_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "FILE_PATH": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "FILE_SIZE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "GNR_RCMD_CNT": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "INDEX_INSERT_DATE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "INPUTDATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "KEY": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "MAIL_ID": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "MENU_CODE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "MENU_ID": {
        "type": "keyword"
      },
      "QUEUE_INSERT_DATE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "SECURITY_LEVEL": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "SORT_RCMD": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "SUM_RCMD_CNT": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "SYSTEM_SUB_CODE": {
        "type": "keyword"
      },
      "SYSTEM_SUB_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "SYSTEM_TAG": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "TARGET_URL": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "THUMB_IMG_URL": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "TITLE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "UPDATED_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "UPDATED_USER_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "UPDATED_USER_NO": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "USED_SYSTEM": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "USER_INFO": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "USER_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "USER_NO": {
        "type": "keyword"
      },
      "VERSION": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      }
    }
  }
}


GET ict_sop_idx/_mapping

GET ict_sop_idx/_search
{
  "track_total_hits": true, 
  "query": {
    "match_all": {}
  },
  "size": 10
}



##########################################
##########################################
##########################################
# elasticsearch data migration 7.9
# es_unfair_documents_history index
##########################################
##########################################
##########################################

PUT es_unfair_documents_history
{
  "settings": {
    "index": {
     "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "max_ngram_diff": 250,
      "number_of_shards": "10",
      "analysis": {
        "filter": {
          "length_filter": {
            "type": "length",
            "min": "2"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "whitespace_remove": {
            "pattern": " ",
            "type": "pattern_replace",
            "replacement": ""
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "truncate_filter": {
            "length": "150",
            "type": "truncate"
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "length_filter",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_synonym": {
            "filter": [
              "lowercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          }
        },
        "tokenizer": {
          "nori_user_dict": {
            "mode": "MIXED",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "sentence_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "my_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "20"
          }
        }
      },
      "number_of_replicas": "1"
    }
  },
  "mappings": {
    "properties": {
      "@timestamp": {
        "type": "date"
      },
      "CATEGORY_ID": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "CATEGORY_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      },
      "COMPANY_CODE": {
        "type": "keyword"
      },
      "CONSULT_DESCRIPT": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_DETECT_INFRINGEMENT_ID": {
        "type": "keyword"
      },
      "CONSULT_INFRINGEMENT_ID": {
        "type": "keyword"
      },
      "CONSULT_LAW_ID": {
        "type": "keyword"
      },
      "CONSULT_LAW_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_NO": {
        "type": "keyword"
      },
      "CONSULT_OPINION": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_STATUS": {
        "type": "keyword"
      },
      "CONSULT_SUB_LAW_ID": {
        "type": "keyword"
      },
      "CONSULT_SUB_LAW_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_UNFAIR_YN": {
        "type": "keyword"
      },
      "CREATED_OBJECT_ID": {
        "type": "text",
        "analyzer": "korean_analyzer_custom"
      },
      "CREATION_TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "DEPT_CODE": {
        "type": "keyword"
      },
      "DEPT_NAME": {
        "type": "text",
        "fields": {
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DETECT_EXACT_RATE": {
        "type": "long"
      },
      "DETECT_INFRINGEMENT_ID": {
        "type": "keyword"
      },
      "DETECT_SENTENCE": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "analyzer": "korean_analyzer_custom"
      },
      "DETECT_UNFAIR_YN": {
        "type": "keyword"
      },
      "DOC_ID": {
        "type": "keyword"
      },
      "DOC_SIZE": {
        "type": "long"
      },
      "DOC_TITLE": {
        "type": "text",
        "fields": {
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DOC_TYPE": {
        "type": "keyword"
      },
      "EXTRACT_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "INPUTDATE": {
        "type": "date",
        "fields": {
          "keyword": {
            "type": "keyword"
          }
        },
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "LAST_UPDATED_OBJECT_ID": {
        "type": "text",
        "analyzer": "korean_analyzer_custom"
      },
      "LAST_UPDATE_TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "LAW_ID": {
        "type": "keyword"
      },
      "LAW_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "MODEL_ID": {
        "type": "keyword"
      },
      "SECURITY_LEVEL": {
        "type": "keyword"
      },
      "SENTENCE_ID": {
        "type": "keyword"
      },
      "SUB_LAW_ID": {
        "type": "keyword"
      },
      "SUB_LAW_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "SYSTEM_ID": {
        "type": "text",
        "analyzer": "upper_index_analyzer"
      },
      "TRANSACTION_DATE": {
        "type": "date",
        "format": "yyyyMMdd"
      },
      "UPDATED_DATE": {
        "type": "date",
        "fields": {
          "keyword": {
            "type": "keyword"
          }
        },
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "USER_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "USER_NO": {
        "type": "keyword"
      },
      "VERSION": {
        "type": "keyword"
      },
      "WORK_STATUS": {
        "type": "keyword"
      }
    }
  }
}

GET es_unfair_documents_history/_mapping

GET es_unfair_documents_history/_search
{
  "track_total_hits": true, 
  "query": {
    "match_all": {}
  },
  "size": 10
}


##########################################
##########################################
##########################################
# elasticsearch data migration 7.9
# ftc_detecion index
##########################################
##########################################
##########################################

PUT ftc_detection
{
  "settings": {
    "index": {
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "max_ngram_diff": 20,
      "number_of_shards": "10",
      "analysis": {
        "filter": {
          "length_filter": {
            "type": "length",
            "min": "2"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "whitespace_remove": {
            "pattern": " ",
            "type": "pattern_replace",
            "replacement": ""
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "truncate_filter": {
            "length": "150",
            "type": "truncate"
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_synonym": {
            "filter": [
              "lowercase",
              "synonym",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          }
        },
        "tokenizer": {
          "nori_user_dict": {
            "mode": "MIXED",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "sentence_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "my_tokenizer": {
            "pattern": """\.""",
            "type": "pattern"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "20"
          }
        }
      },
      "number_of_replicas": "1"
    }
  },
  "mappings": {
    "properties": {
      "@timestamp": {
        "type": "date"
      },
      "CONTENT": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "fields": {
          "truncated": {
            "type": "text",
            "analyzer": "my_truncate_analyzer",
            "fielddata": true
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "INPUTDATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "UPDATED_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      }
    }
  }
}



##########################################
##########################################
##########################################
# elasticsearch data migration 7.6
# search monitoring
# server_management_template
##########################################
##########################################
##########################################

DELETE server-management

# server_management
PUT server-management
{
  "settings": {
    "index": {
      "number_of_shards": 10,
      "number_of_replicas": 1,
      "max_ngram_diff": 20,
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "analysis": {
        "filter": {
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "length_filter": {
            "type": "length",
            "min": 2
          },
          "truncate_filter": {
            "type": "truncate",
            "length": 150
          },
          "whitespace_remove": {
            "type": "pattern_replace",
            "pattern": " ",
            "replacement": ""
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "J",
              "MAG",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "korean_synonym": {
            "filter": [
              "uppercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "split_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "comma_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "comma_tokenizer"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          },
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "uppercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "uppercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          }
        },
        "tokenizer": {
          "sentence_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "comma_tokenizer": {
            "type": "pattern",
            "pattern": """\,"""
          },
          "my_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "nori_user_dict": {
            "decompound_mode": "mixed",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit",
              "punctuation",
              "symbol"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "18"
          }
        }
      }
    }
  },
  "mappings": {
    "dynamic_templates": [
      {
        "strings": {
          "match": "*DATE",
          "match_mapping_type": "string",
          "mapping": {
            "format": "yyyy-MM-dd HH:mm:ss",
            "type": "date"
          }
        }
      },
      {
        "long": {
          "match": "SORT*",
          "match_mapping_type": "long",
          "mapping": {
            "type": "long"
          }
        }
      }
    ],
    "properties": {
      "@timestamp": {
        "type": "date"
      },
      "DESCRIPTION": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "fields": {
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          },
          "truncated": {
            "type": "text",
            "analyzer": "my_truncate_analyzer",
            "fielddata": true
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "HOST_NAME": {
        "type": "keyword"
      },
      "INFRA_TYPE": {
        "type": "keyword"
      },
      "PORT": {
        "type": "keyword"
      },
      "POSCO_NAT_IP": {
        "type": "keyword"
      },
      "REAL_IP": {
        "type": "keyword"
      },
      "SERVER_NAME": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "fields": {
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          },
          "truncated": {
            "type": "text",
            "analyzer": "my_truncate_analyzer",
            "fielddata": true
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "SERVER_TYPE": {
        "type": "keyword"
      },
      "SERVICE_IP": {
        "type": "keyword"
      },
      "TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "USER_ID": {
        "type": "keyword"
      },
      "USER_PW": {
        "type": "keyword"
      }
    }
  }
}

GET server-management/_mapping

GET server-management/_search
{
  "track_total_hits": true,
  "query": {
    "match_all": {}
  },
  "size": 15
}



##########################################
##########################################
##########################################
# elasticsearch data migration 7.6
# search monitoring
# es_law_tax_trainset (약관공정화,세무 학습데이터셋)
##########################################
##########################################
##########################################

PUT es_law_tax_trainset
{
  "settings": {
    "index": {
      "number_of_shards": 10,
      "number_of_replicas": 1,
      "max_ngram_diff": 20,
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "analysis": {
        "filter": {
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "length_filter": {
            "type": "length",
            "min": 2
          },
          "truncate_filter": {
            "type": "truncate",
            "length": 150
          },
          "whitespace_remove": {
            "type": "pattern_replace",
            "pattern": " ",
            "replacement": ""
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "korean_synonym": {
            "filter": [
              "lowercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "lowercase",
              "length_filter",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "lowercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          },
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          }
        },
        "tokenizer": {
          "sentence_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "my_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "nori_user_dict": {
            "decompound_mode": "MIXED",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "20"
          }
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "@timestamp": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "COMPANY_CODE": {
        "type": "keyword"
      },
      "LAW_ID": {
        "type": "keyword"
      },
      "LAW_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "SUB_LAW_ID": {
        "type": "keyword"
      },
      "SUB_LAW_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DOC_ID": {
        "type": "keyword"
      },
      "DOC_TILE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "EXTRACT_DATE": {
        "type": "date",
        "format": "yyyyMMdd"
      },
      "SEQ": {
        "type": "keyword"
      },
      "DETECT_SENTENCE": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "fields": {
          "truncated": {
            "type": "text",
            "analyzer": "my_truncate_analyzer",
            "fielddata": true
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DETECT_INFRINGEMENT_ID": {
        "type": "keyword"
      },
      "DETECT_INFRINGEMENT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DETECT_UNFAIR_YN": {
        "type": "keyword"
      },
      "DETECT_EXACT_RATE": {
        "type": "double"
      },
      "CONSULT_STATUS": {
        "type": "keyword"
      },
      "CONSULT_LAW_ID": {
        "type": "keyword"
      },
      "CONSULT_LAW_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_SUB_LAW_ID": {
        "type": "keyword"
      },
      "CONSULT_SUB_LAW_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_INFRINGEMENT_ID": {
        "type": "keyword"
      },
      "CONSULT_INFRINGEMENT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_DESCRIPT": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "fields": {
          "truncated": {
            "type": "text",
            "analyzer": "my_truncate_analyzer",
            "fielddata": true
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_SENTENCE": {
        "type": "text",
        "term_vector": "with_positions_offsets",
        "fields": {
          "truncated": {
            "type": "text",
            "analyzer": "my_truncate_analyzer",
            "fielddata": true
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "TRAIN_SOURCE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "TRAIN_DETAIL_SOURCE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "FROM_SOURCE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "FROM_SOURCE_URL": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_UNFAIR_YN": {
        "type": "keyword"
      },
      "CONSULT_NO": {
        "type": "keyword"
      },
      "CREATION_TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "LAST_UPDATE_TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "IS_BULK": {
        "type": "keyword"
      },
      "SYSTEM_ID": {
        "type": "text",
        "analyzer": "upper_index_analyzer"
      }
    }
  }
}


GET es_law_tax_trainset/_mapping

GET LAW

POST _aliases
{
  "actions": [
    {
      "add": {
        "indices": [
          "es_law_tax_trainset"
        ],
        "alias": "LAW_TAX_TRAINSET"
      }
    }
  ]
}


GET es_law_tax_trainset/_search
GET es_law_tax_trainset/_mapping

GET POSCO_ECM/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "terms": {
            "KEY": [
              "doc0900bf4b9e4eecff"
            ]
          }
        }
      ]
    }
  }
}


##########################################
##########################################
##########################################
# elasticsearch data migration 7.6
# search monitoring
# 포스코건설 검출결과 MASTER/Slave
# 약관공정화그룹사 로그조회 template
##########################################
##########################################
##########################################

# 자동검출/수동검출/history 문서정보 template
PUT /_template/python_document_detect/
{
  "index_patterns": [
    "unfair-master-manual-*"
  ],
  "aliases": {
    "UNFAIR-MASTER-MANUAL": {}
  },
  "settings": {
    "index": {
      "number_of_shards": 10,
      "number_of_replicas": 1,
      "max_ngram_diff": 30,
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "analysis": {
        "filter": {
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "length_filter": {
            "type": "length",
            "min": 1
          },
          "truncate_filter": {
            "type": "truncate",
            "length": 150
          },
          "whitespace_remove": {
            "type": "pattern_replace",
            "pattern": " ",
            "replacement": ""
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "korean_synonym": {
            "filter": [
              "uppercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          },
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          }
        },
        "tokenizer": {
          "sentence_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "my_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "nori_user_dict": {
            "decompound_mode": "MIXED",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit",
              "punctuation",
              "symbol"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "30"
          }
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "@timestamp": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "COMPANY_CODE": {
        "type": "keyword"
      },
      "SEQ": {
        "type": "keyword"
      },
      "KEY": {
        "type": "keyword"
      },
      "PROGRESS_STATUS": {
        "type": "keyword"
      },
      "LOGIN_ID": {
        "type": "keyword"
      },
      "TOTAL_CNT": {
        "type": "keyword"
      },
      "NEG_CNT": {
        "type": "keyword"
      },
      "SYSTEM_ID": {
        "type": "keyword"
      },
      "LAW_ID": {
        "type": "keyword"
      },
      "SUB_LAW_ID": {
        "type": "keyword"
      },
      "DOC_ID": {
        "type": "keyword"
      },
      "EXTRACT_DATE": {
        "type": "date",
        "format": "yyyyMMdd"
      },
      "DOC_TITLE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DOC_URL": {
        "type": "keyword"
      },
      "OWNER_NO": {
        "type": "keyword"
      },
      "OWNER_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "OWNER_DEPT_CODE": {
        "type": "keyword"
      },
      "OWNER_DEPT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DOC_INSERT_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "DOC_UPDATE_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "DOC_TYPE": {
        "type": "keyword"
      },
      "DOC_VERSION": {
        "type": "double"
      },
      "SECURITY_LEVEL": {
        "type": "keyword"
      },
      "WORK_STATUS": {
        "type": "keyword"
      },
      "CONSULTANT_NO": {
        "type": "keyword"
      },
      "CONSULTANT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULTANT_DEPT_CODE": {
        "type": "keyword"
      },
      "CONSULTANT_DEPT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULTED_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "SUPERVISOR_NO": {
        "type": "keyword"
      },
      "SUPERVISED_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "RETURN_MSG": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "RETURNED_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "MODEL_ID": {
        "type": "keyword"
      },
      "EXCEPT_YN": {
        "type": "keyword"
      },
      "EXCEPTED_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "DUPLICATED_YN": {
        "type": "keyword"
      },
      "FINAL_REVISION_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "CREATED_OBJECT_ID": {
        "type": "keyword"
      },
      "CREATION_TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "UPDATED_TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "LAST_UPDATE_TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "DOC_SIZE": {
        "type": "long"
      },
      "RECONSULT_MSG": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      }
    }
  }
}

# 자동검출/수동검출/history 문장 template
PUT /_template/python_sentence_detect/
{
  "index_patterns": [
    "unfair-slave-manual-*"
  ],
  "aliases": {
    "UNFAIR-SLAVE-MANUAL": {}
  },
  "settings": {
    "index": {
      "number_of_shards": 10,
      "number_of_replicas": 1,
      "max_ngram_diff": 30,
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "analysis": {
        "filter": {
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "length_filter": {
            "type": "length",
            "min": 1
          },
          "truncate_filter": {
            "type": "truncate",
            "length": 150
          },
          "whitespace_remove": {
            "type": "pattern_replace",
            "pattern": " ",
            "replacement": ""
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "korean_synonym": {
            "filter": [
              "uppercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          },
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          }
        },
        "tokenizer": {
          "sentence_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "my_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "nori_user_dict": {
            "decompound_mode": "MIXED",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit",
              "punctuation",
              "symbol"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "30"
          }
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "@timestamp": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "COMPANY_CODE": {
        "type": "keyword"
      },
      "EXTRACT_ID": {
        "type": "keyword"
      },
      "EXTRACT_UNIQUE_ID": {
        "type": "keyword"
      },
      "FILE_YN": {
        "type": "keyword"
      },
      "LAW_ID": {
        "type": "keyword"
      },
      "LAW_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "SUB_LAW_ID": {
        "type": "keyword"
      },
      "SUB_LAW_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "INFRINGEMENT_ID": {
        "type": "keyword"
      },
      "INFRINGEMENT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DOC_ID": {
        "type": "keyword"
      },
      "DOC_TITLE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DOC_URL": {
        "type": "keyword"
      },
      "OWNER_NO": {
        "type": "keyword"
      },
      "OWNER_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "OWNER_DEPT_CODE": {
        "type": "keyword"
      },
      "OWNER_DEPT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DOC_INSERT_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "DOC_UPDATE_DATE": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "SECURITY_LEVEL": {
        "type": "keyword"
      },
      "SEQ": {
        "type": "keyword"
      },
      "DETECT_SENTENCE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "DETECT_UNFAIR_YN": {
        "type": "keyword"
      },
      "DETECT_EXACT_RATE": {
        "type": "long"
      },
      "CONSULT_UNFAIR_YN": {
        "type": "keyword"
      },
      "CONSULT_LAW_ID": {
        "type": "keyword"
      },
      "CONSULT_SUB_LAW_ID": {
        "type": "keyword"
      },
      "CONSULT_INFRINGEMENT_ID": {
        "type": "keyword"
      },
      "CONSULT_INFRINGEMENT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_DESCRIPT": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_OPINION": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULTANT_NO": {
        "type": "keyword"
      },
      "CONSULTANT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULTANT_DEPT_CODE": {
        "type": "keyword"
      },
      "CONSULTANT_DEPT_NAME": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "CONSULT_STATUS": {
        "type": "keyword"
      },
      "SYSTEM_ID": {
        "type": "keyword"
      },
      "HOST": {
        "type": "keyword"
      },
      "REQUEST_SERVER_IP": {
        "type": "keyword"
      },
      "PATH": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "MESSAGE": {
        "type": "text",
        "fields": {
          "keyword": {
            "type": "keyword"
          },
          "nGram": {
            "type": "text",
            "analyzer": "nGram_analyzer"
          }
        },
        "analyzer": "korean_analyzer_custom"
      },
      "PREDICT_DELAY_TIME": {
        "type": "long"
      },
      "LOGGER_NAME": {
        "type": "keyword"
      },
      "LEVEL": {
        "type": "keyword"
      },
      "LOGIN_ID": {
        "type": "keyword"
      },
      "CREATED_OBJECT_ID": {
        "type": "keyword"
      },
      "CREATION_TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      },
      "EXTRACT_DATE": {
        "type": "date",
        "format": "yyyyMMdd"
      },
      "LAST_UPDATE_TIMESTAMP": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss"
      }
    }
  }
}

# 약관공정화그룹사 로그조회 template
# was-server-log-*,
# "ai-server-log-*
PUT /_template/tomcat_server_log/
{
  "index_patterns": [
    "was-server-log-*",
    "ai-server-log-*"
  ],
  "settings": {
    "index": {
      "number_of_shards": 10,
      "number_of_replicas": 1,
      "max_ngram_diff": 30,
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "analysis": {
        "filter": {
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "length_filter": {
            "type": "length",
            "min": 1
          },
          "truncate_filter": {
            "type": "truncate",
            "length": 500
          },
          "whitespace_remove": {
            "type": "pattern_replace",
            "pattern": " ",
            "replacement": ""
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "MM",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSN",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "korean_synonym": {
            "filter": [
              "uppercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "split_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          },
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "lowercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "lowercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "lowercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          }
        },
        "tokenizer": {
          "sentence_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "my_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "nori_user_dict": {
            "decompound_mode": "MIXED",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit",
              "punctuation",
              "symbol"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "30"
          }
        }
      }
    }
  },
  "mappings": {
    "dynamic_templates": [
      {
        "date_template": {
          "match": "*_DT",
          "mapping": {
            "format": "yyyy/MM/dd HH:mm:ss||yyyy/MM/dd||epoch_millis",
            "type": "date"
          }
        }
      },
      {
        "date_template": {
          "match": "*DATE",
          "mapping": {
            "format": "yyyy/MM/dd HH:mm:ss||yyyy/MM/dd||epoch_millis",
            "type": "date"
          }
        }
      },
      {
        "date_template": {
          "match": "*STAMP",
          "mapping": {
           "format": "yyyy-MM-dd HH:mm:ss",
            "type": "date"
          }
        }
      },
      {
        "text_template": {
          "match_mapping_type": "string",
          "mapping": {
            "fields": {
              "keyword": {
                "type": "text",
                "analyzer": "upper_index_analyzer"
              },
              "nGram": {
                "type": "text",
                "analyzer": "nGram_analyzer"
              },
              "text": {
                "term_vector": "with_positions_offsets",
                "type": "text",
                "analyzer": "korean_analyzer_custom"
              },
              "truncated": {
                "type": "text",
                "analyzer": "my_truncate_analyzer"
              }
            },
            "type": "text",
            "analyzer": "korean_analyzer_custom"
          }
        }
      }
    ]
  }
}


# 약관공정화그룹사 AI 모델업그레이드이력 (지표)
PUT ai_performance_maxtrix
{
  "settings": {
    "index": {
      "number_of_shards": 10,
      "number_of_replicas": 1,
      "max_ngram_diff": 20,
      "mapping": {
        "ignore_malformed": "true",
        "total_fields.limit": "3000"
      },
      "analysis": {
        "filter": {
          "stop": {
            "ignore_case": "true",
            "type": "stop",
            "stopwords_path": "analysis/stopwords.txt"
          },
          "synonym": {
            "ignore_case": "true",
            "type": "synonym",
            "synonyms_path": "analysis/glossary_arirang.txt"
          },
          "synonym_type_filter": {
            "type": "keep_types",
            "types": [
              "SYNONYM"
            ]
          },
          "length_filter": {
            "type": "length",
            "min": 2
          },
          "truncate_filter": {
            "type": "truncate",
            "length": 150
          },
          "whitespace_remove": {
            "type": "pattern_replace",
            "pattern": " ",
            "replacement": ""
          },
          "pos_filter": {
            "type": "nori_part_of_speech",
            "stoptags": [
              "E",
              "IC",
              "J",
              "MAG",
              "SP",
              "SSC",
              "SSO",
              "SC",
              "SE",
              "XPN",
              "XSA",
              "XSV",
              "UNA",
              "NA",
              "VSV"
            ]
          }
        },
        "analyzer": {
          "korean_synonym": {
            "filter": [
              "uppercase",
              "synonym",
              "stop",
              "synonym_type_filter"
            ],
            "type": "custom",
            "tokenizer": "nori_tokenizer"
          },
          "split_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "my_tokenizer"
          },
          "korean_analyzer_custom": {
            "filter": [
              "pos_filter",
              "nori_readingform",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_user_dict"
          },
          "korean_analyzer_default": {
            "filter": [
              "pos_filter",
              "uppercase",
              "stop"
            ],
            "tokenizer": "nori_tokenizer"
          },
          "upper_index_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          },
          "nGram_analyzer": {
            "filter": [
              "uppercase"
            ],
            "tokenizer": "ngram_tokenizer"
          },
          "search_keyword_analyzer": {
            "filter": [
              "uppercase"
            ],
            "type": "custom",
            "tokenizer": "standard"
          },
          "whitespace_analyzer": {
            "filter": [
              "uppercase",
              "asciifolding"
            ],
            "type": "custom",
            "tokenizer": "whitespace"
          },
          "whitespace_keyword_analyzer": {
            "filter": [
              "uppercase",
              "whitespace_remove"
            ],
            "type": "custom",
            "tokenizer": "sentence_tokenizer"
          },
          "my_truncate_analyzer": {
            "filter": [
              "truncate_filter"
            ],
            "type": "custom",
            "tokenizer": "keyword"
          }
        },
        "tokenizer": {
          "sentence_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "my_tokenizer": {
            "type": "pattern",
            "pattern": """\."""
          },
          "nori_user_dict": {
            "decompound_mode": "MIXED",
            "type": "nori_tokenizer",
            "user_dictionary": "userdic_ko.txt"
          },
          "ngram_tokenizer": {
            "token_chars": [
              "letter",
              "digit",
              "punctuation",
              "symbol"
            ],
            "min_gram": "2",
            "type": "nGram",
            "max_gram": "18"
          }
        }
      }
    }
  },
  "mappings": {
    "dynamic_templates": [
      {
        "date_template": {
          "match": "*STAMP",
          "mapping": {
            "format": "yyyy-MM-dd HH:mm:ss",
            "type": "date"
          }
        }
      },
      {
        "date_template": {
          "match": "*_DATE",
          "mapping": {
            "format": "yyyy-MM-dd HH:mm:ss",
            "type": "date"
          }
        }
      },
      {
        "date_template": {
          "match": "CONTENT",
          "mapping": {
            "fields": {
              "text": {
                "term_vector": "with_positions_offsets",
                "type": "text",
                "analyzer": "korean_analyzer_custom"
              }
            },
            "type": "text",
            "analyzer": "korean_analyzer_custom"
          }
        }
      },
      {
        "long_template": {
          "match_mapping_type": "long",
           "mapping": {
             "type" : "long"
           }
        }
      }
    ]
  }
}

PUT _bulk
{"index":{"_index":"ai_performance_maxtrix","_type":"_doc"}}
{"POS_F1":83,"POS_ACCURACY":72,"POS_PRECISION":61,"POS_RECALL":73,"TIMESTAMP":"2020-07-14 12:00:00","NEG_F1":83,"NEG_ACCURACY":72,"NEG_PRECISION":61,"NEG_RECALL":73}
{"index":{"_index":"ai_performance_maxtrix","_type":"_doc"}}
{"POS_F1":93,"POS_ACCURACY":42,"POS_PRECISION":51,"POS_RECALL":63,"NEG_F1":93,"NEG_ACCURACY":42,"NEG_PRECISION":51,"NEG_RECALL":63,"TIMESTAMP":"2020-07-13 12:00:00"}


GET ai_performance_maxtrix/_mapping

GET ai_performance_maxtrix/_search



##########################################
##########################################
##########################################
# elasticsearch data migration 7.9
# contents_queue_history index (향후 설계)
# contents-feeder-server-log* (향후 설계)
##########################################
##########################################
##########################################
{
        "_index" : "contents_queue_history",
        "_type" : "dwinter",
        "_id" : "doc0900bf4b9deecf81",
        "_score" : 1.0,
        "_source" : {
          "KEY" : "doc0900bf4b9deecf81",
          "VERSION" : "0900bf4b9e2150f1",
          "INPUTDATE" : "2019-03-06 16:30:54"
        }
}

 {
        "_index" : "contents-feeder-server-log-2019-04-18",
        "_type" : "posco",
        "_id" : "201904181731501",
        "_score" : 1.0,
        "_source" : {
          "START_DATE" : "2019-04-18 15:30:04",
          "END_DATE" : "2019-04-18 17:31:50",
          "MESSAGE" : "{^_index^:^posco_today_idx^,^_type^:^posco^,^_id^:^002001|12|32634^,^error^:{^reason^:^rejected execution of processing of [215198][indices:data&#92;/write&#92;/bulk[s][p]]: request: BulkShardRequest [[posco_today_idx][2]] containing [index {[posco_today_idx][posco][002001|12|32634], source[{&#92;^ITEMID&#92;^:&#92;^002001|12|32634&#92;^,&#92;^KEY&#92;^:&#92;^002001|12|32634&#92;^,&#92;^TITLE&#92;^:&#92;^ &#92;^,&#92;^TARGET_URL&#92;^:&#92;^ &#92;^,&#92;^MAIL_ID&#92;^:&#92;^ &#92;^,&#92;^USER_NO&#92;^:&#92;^_&#92;^,&#92;^SECURITY_LEVEL&#92;^:&#92;^ &#92;^,&#92;^INPUTDATE&#92;^:&#92;^ &#92;^,&#92;^USER_NAME&#92;^:&#92;^ &#92;^,&#92;^UPDATED_USER&#92;^:&#92;^ &#92;^,&#92;^UPDATED_DATE&#92;^:&#92;^ &#92;^,&#92;^COMPANY_CODE&#92;^:&#92;^ &#92;^,&#92;^COMPANY_NAME&#92;^:&#92;^ &#92;^,&#92;^DEPT_CODE&#92;^:&#92;^ &#92;^,&#92;^DEPT_NAME&#92;^:&#92;^ &#92;^,&#92;^USED_SYSTEM&#92;^:&#92;^ &#92;^,&#92;^COWORKER_ID&#92;^:&#92;^ &#92;^,&#92;^MENU_CODE&#92;^:&#92;^ &#92;^,&#92;^MENU_SUB_CODE&#92;^:&#92;^ &#92;^,&#92;^SYSTEM_SUB_CODE&#92;^:&#92;^POSCO_TODAY&#92;^,&#92;^SYSTEM_SUB_NAME&#92;^:&#92;^ &#92;^,&#92;^CONTENT_VERSION_ID&#92;^:&#92;^ &#92;^,&#92;^CONTENT_FILE_FORMAT&#92;^:&#92;^ &#92;^,&#92;^CONTENT_SIZE&#92;^:&#92;^ &#92;^,&#92;^VERSION&#92;^:&#92;^ &#92;^,&#92;^FILE_ID&#92;^:&#92;^ &#92;^,&#92;^FILE_PATH&#92;^:&#92;^ &#92;^,&#92;^FILE_NAME&#92;^:&#92;^ &#92;^,&#92;^ACL_INFOS&#92;^:&#92;^ &#92;^,&#92;^QUEUE_INSERT_DATE&#92;^:&#92;^2019-04-18 14:27:50&#92;^,&#92;^UPDATED_USER_NO&#92;^:&#92;^ &#92;^,&#92;^UPDATED_USER_NAME&#92;^:&#92;^ &#92;^,&#92;^USER_INFO&#92;^:&#92;^ &#92;^,&#92;^SYSTEM_TAG&#92;^:&#92;^ &#92;^,&#92;^THUMB_IMG_URL&#92;^:&#92;^ &#92;^,&#92;^EXPT_RCMD_CNT&#92;^:&#92;^ &#92;^,&#92;^GNR_RCMD_CNT&#92;^:&#92;^ &#92;^,&#92;^SUM_RCMD_CNT&#92;^:&#92;^ &#92;^,&#92;^SORT_RCMD&#92;^:&#92;^ &#92;^,&#92;^EXPT_YN&#92;^:&#92;^ &#92;^,&#92;^FILE_FORMAT&#92;^:&#92;^ &#92;^,&#92;^FILE_SIZE&#92;^:&#92;^ &#92;^,&#92;^CONTENT&#92;^:&#92;^&#92;^,&#92;^INDEX_INSERT_DATE&#92;^:&#92;^2019-04-18 15:30:12&#92;^}]}], target allocation id: KaJLmRVqThab3HPhN0_LlQ, primary term: 3 on EsThreadPoolExecutor[name = ES_DATA_17&#92;/write, queue capacity = 200, org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor@a25c9f7[Running, pool size = 10, active threads = 10, queued tasks = 209, completed tasks = 546]]^,^type^:^es_rejected_execution_exception^},^status^:429}",
          "INDEX_CONTENTS_CNT" : 5,
          "INDEX_FAIL_CONTENTS_CNT" : 5,
          "SYSTEM_ID" : "posco_today",
          "COMPANY_CODE" : "30",
          "HOST" : "PLCFCNA6",
          "HOST_IP" : "10.132.18.173",
          "RAW_JSON" : "[^INDEX_INSERT_DATE^:^2019-04-18 15:30:12^,, }</br>{^index^:{^_index^:^posco_today_idx^,^_type^:^posco^,^_id^:^002001|12|32634^}}</br>{, ^ITEMID^:^002001|12|32634^,, ^KEY^:^002001|12|32634^,, ^TITLE^:^ ^,, ^TARGET_URL^:^ ^,, ^MAIL_ID^:^ ^,, ^USER_NO^:^_^,, ^SECURITY_LEVEL^:^ ^,, ^INPUTDATE^:^ ^,, ^USER_NAME^:^ ^,, ^UPDATED_USER^:^ ^,, ^UPDATED_DATE^:^ ^,, ^COMPANY_CODE^:^ ^,, ^COMPANY_NAME^:^ ^,, ^DEPT_CODE^:^ ^,, ^DEPT_NAME^:^ ^,, ^USED_SYSTEM^:^ ^,, ^COWORKER_ID^:^ ^,, ^MENU_CODE^:^ ^,, ^MENU_SUB_CODE^:^ ^,, ^SYSTEM_SUB_CODE^:^POSCO_TODAY^,, ^SYSTEM_SUB_NAME^:^ ^,, ^CONTENT_VERSION_ID^:^ ^,, ^CONTENT_FILE_FORMAT^:^ ^,, ^CONTENT_SIZE^:^ ^,, ^VERSION^:^ ^,, ^FILE_ID^:^ ^,, ^FILE_PATH^:^ ^,, ^FILE_NAME^:^ ^,, ^ACL_INFOS^:^ ^,, ^QUEUE_INSERT_DATE^:^2019-04-18 14:27:50^,, ^UPDATED_USER_NO^:^ ^,, ^UPDATED_USER_NAME^:^ ^,, ^USER_INFO^:^ ^,, ^SYSTEM_TAG^:^ ^,, ^THUMB_IMG_URL^:^ ^,, ^EXPT_RCMD_CNT^:^ ^,, ^GNR_RCMD_CNT^:^ ^,, ^SUM_RCMD_CNT^:^ ^,, ^SORT_RCMD^:^ ^,, ^EXPT_YN^:^ ^,, ^FILE_FORMAT^:^ ^,, ^FILE_SIZE^:^ ^,, ^CONTENT^:^^,]",
          "ACTION" : "IE"
        }
}

{
        "_index" : "contents_delete_history",
        "_type" : "es",
        "_id" : "doc0900bf4b9aebad8a",
        "_score" : 1.0,
        "_source" : {
          "KEY" : "doc0900bf4b9aebad8a",
          "index_name" : "rist_ecm_grp_idx",
          "INPUTDATE" : "2018-09-07 16:41:18"
        }
},